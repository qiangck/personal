function resizeContainer(){var e=$(window).width()/640,t=$(window).height()/960,n=Math.min(e,t),i=640*n,a=960*n;e>t?($(document.body).addClass("bg-body"),$("body").css({"margin-left":($(window).width()-i)/2})):$("body").css({"margin-top":($(window).height()-a)/2}),window.scale=n;var s={"-webkit-transform":"scale("+n+", "+n+")","-ms-transform":"scale("+n+", "+n+")","-o-transform":"scale("+n+", "+n+")",transform:"scale("+n+", "+n+")"};$("body").css(s)}function loadAssets(e){var t=new AssetLoad({success:e}),n=["assets/images/pa0.png","assets/images/pa1.png","assets/images/pa2.png","assets/images/pa3.png","assets/images/bianzi/left0.png","assets/images/bianzi/left1.png","assets/images/bianzi/left2.png","assets/images/bianzi/right0.png","assets/images/bianzi/right1.png","assets/images/bianzi/right2.png","assets/images/dongzuo/donghuaM1.png","assets/images/dongzuo/donghuaM2.png","assets/images/dongzuo/donghuaM3.png","assets/images/dongzuo/donghuaM4.png","assets/images/dongzuo/donghuaM5.png","assets/images/dongzuo/donghuaM6.png","assets/images/dongzuo/donghuaM7.png","assets/images/dongzuo/donghuaM8.png","assets/images/dongzuo/donghuaM9.png","assets/images/dongzuo/donghuaW1.png","assets/images/dongzuo/donghuaW2.png","assets/images/dongzuo/donghuaW3.png","assets/images/dongzuo/donghuaW4.png","assets/images/dongzuo/donghuaW5.png","assets/images/dongzuo/donghuaW6.png","assets/images/dongzuo/donghuaW7.png","assets/images/dongzuo/donghuaW8.png","assets/images/dongzuo/donghuaW9.png"];n.forEach(function(e){t.preLoadImg(e)}),t.load()}function initFaceFromParams(){function e(e){var t=document.querySelector("#gameIntro .title .info").innerHTML;t=t.replace(/{{[^{{]*}}/gi,function(t){return t=t.replace(/{|}/gi,""),e[t]?e[t]:Math.floor(1e3*Math.random()-100)}),document.querySelector("#gameIntro .title .info").innerHTML=t}var t={lian:0,meimao:0,yanjing:0,zui:0,shang:1,liancolorr:255,liancolorg:255,liancolorb:255,sex:"man"};RC.UTILS.merger(t,RC.UTILS.UrlParam);for(var n=document.querySelectorAll(".name"),i=0;i<n.length;i++)n[i].innerHTML=decodeURIComponent(RC.UTILS.UrlParam.username);$.ajax({url:"/chouren/"+t.uid,type:"get",success:function(t){"string"==typeof t&&(t=JSON.parse(t)),e(t)},error:function(){e({})}}),"woman"===t.sex?($("#gameIntro .shenti img").attr("src","assets/images/renkaishinv.png"),$("#gameScreen .shenti img").attr("src","assets/images/dongzuo/donghuaW1.png"),$("#result .shenti img").attr("src","assets/images/renjieshunv.png")):($("#gameIntro .shenti img").attr("src","assets/images/renkaishi.png"),$("#gameScreen .shenti img").attr("src","assets/images/dongzuo/donghuaM1.png"),$("#result .shenti img").attr("src","assets/images/renjieshunan.png"));var a=getBaseFace(t);document.querySelector("#baseFace").innerHTML=a;var s=[{elem:document.getElementById("lian"),color:[t.liancolorr,t.liancolorg,t.liancolorb]},{elem:document.getElementById("toufahou"),color:[t.toufahoucolorr,t.toufahoucolorg,t.toufahoucolorb]},{elem:document.getElementById("toufaqian"),color:[t.toufaqiancolorr,t.toufaqiancolorg,t.toufaqiancolorb]}],r=0;loadAssets(function(){hideLoading("#gameIntro")});for(var i=0;i<s.length;i++)!function(e){var n=s[e].color;s[e].elem?s[e].elem.loadOnce(function(){window.color=n;var e=psLib(this),i=(e.clone(),e.act("添加杂色"));if(i.replace(this),r++,r===s.length){var a=document.querySelector("#baseFace").innerHTML;document.querySelector("#gameIntro .figure").innerHTML=getStartFace(t,a,t.shang),document.querySelector("#userWrap .user .figure").innerHTML=getGameFace(t,a),document.querySelector("#result .figure").innerHTML=getStartFace(t,a,t.shang)}}):r++}(i)}function getStartFace(e,t,n){var i=t;if("string"==typeof n&&(n=parseInt(n)),n-=1,0==n)return getGameFace(e,t);switch(n){case 1:i=i+'<img src="assets/images/meimao/TYmeimao'+e.meimao+'.png" class="meimao zIndex3" /><img src="assets/images/yanjing/TYyanjing'+e.yanjing+'.png" class="yanjing zIndex3" />';break;case 7:i=i+'<img src="assets/images/meimao/TYmeimao'+e.meimao+'.png" class="meimao zIndex3" />';break;case 3:i=i+'<img src="assets/images/meimao/TYmeimao'+e.meimao+'.png" class="meimao zIndex3" /><img src="assets/images/yanjing/TYyanjing'+e.yanjing+'.png" class="yanjing zIndex3" />';break;case 9:}return i+='<img src="assets/images/shang/TYzhengmian0'+n+'.png" class="shang'+n+' shang" />',e.tezheng&&(i+='<img src="assets/images/tezheng/TYtezheng'+e.tezheng+'.png" class="tezheng zIndex3" />'),e.daiyanjing&&(i+='<img src="assets/images/daiyanjing/TYdaiyanjing'+e.daiyanjing+'.png" class="daiyanjing zIndex4" />'),i}function getGameFace(e,t){var n=t;return n+='<img src="assets/images/meimao/TYmeimao'+e.meimao+'.png" class="meimao zIndex3" /><img src="assets/images/zuiba/TYzui'+e.zui+'.png" class="zui zIndex3"><img src="assets/images/yanjing/TYyanjing'+e.yanjing+'.png" class="yanjing zIndex3" />',e.bizi&&(n+='<img src="assets/images/bizi/TYbizi'+e.bizi+'.png" class="bizi zIndex3" />'),e.tezheng&&(n+='<img src="assets/images/tezheng/TYtezheng'+e.tezheng+'.png" class="tezheng zIndex3" />'),e.daiyanjing&&(n+='<img src="assets/images/daiyanjing/TYdaiyanjing'+e.daiyanjing+'.png" class="daiyanjing zIndex4" />'),n}function getBaseFace(e){var t='<img src="assets/images/lian/TYlian'+e.lian+'.png" class="lian zIndex2" id="lian" />';return e.toufahou&&(t+='<img src="assets/images/toufahou/TYtoufahou'+e.toufahou+'.png" class="toufahou zIndex1" id="toufahou" />'),e.toufaqian&&(t+='<img src="assets/images/toufaqian/TYtoufaqian'+e.toufaqian+'.png" class="toufaqian zIndex5" id="toufaqian" />'),t}function initAudio(){createjs.Sound.alternateExtensions=["mp3"],createjs.Sound.registerSound("assets/audio/man/0.mp3","man0"),createjs.Sound.registerSound("assets/audio/man/1.mp3","man1"),createjs.Sound.registerSound("assets/audio/woman/0.mp3","woman0"),createjs.Sound.registerSound("assets/audio/woman/1.mp3","woman1")}function showLoading(e){$("#loading").show(),$("#percent").html(e+"%")}function hideLoading(e){$("#loading").hide(),$("#percent").html(""),$(e).show()}!function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(void 0===this||null===this)throw new TypeError;var n,i=Object(this),a=i.length>>>0,s=0;if("function"!=typeof t)throw new TypeError;if(0==a&&1==arguments.length)throw new TypeError;if(arguments.length>=2)n=arguments[1];else for(;;){if(s in i){n=i[s++];break}if(++s>=a)throw new TypeError}for(;a>s;)s in i&&(n=t.call(e,n,i[s],s,i)),s++;return n})}();var Zepto=function(){function e(e){return"[object Function]"==R.call(e)}function t(e){return e instanceof Object}function n(t){var n,i;if("[object Object]"!==R.call(t))return!1;if(i=e(t.constructor)&&t.constructor.prototype,!i||!hasOwnProperty.call(i,"isPrototypeOf"))return!1;for(n in t);return n===p||hasOwnProperty.call(t,n)}function i(e){return e instanceof Array}function a(e){return"number"==typeof e.length}function s(e){return e.filter(function(e){return e!==p&&null!==e})}function r(e){return e.length>0?[].concat.apply([],e):e}function o(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(e){return e in x?x[e]:x[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function l(e,t){return"number"!=typeof t||L[o(e)]?t:t+"px"}function c(e){var t,n;return b[e]||(t=T.createElement(e),T.body.appendChild(t),n=P(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),b[e]=n),b[e]}function d(e,t){return t===p?v(e):v(e).filter(t)}function h(t,n,i,a){return e(n)?n.call(t,i,a):n}function f(e,t,n){var i=e%2?t:t.parentNode;i?i.insertBefore(n,e?1==e?i.firstChild:2==e?t:null:t.nextSibling):v(n).remove()}function g(e,t){t(e);for(var n in e.childNodes)g(e.childNodes[n],t)}var p,m,v,_,y,S,E=[],w=E.slice,T=window.document,b={},x={},P=T.defaultView.getComputedStyle,L={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},j=/^\s*<(\w+|!)[^>]*>/,A=[1,3,8,9,11],I=["after","prepend","before","append"],N=T.createElement("table"),C=T.createElement("tr"),M={tr:T.createElement("tbody"),tbody:N,thead:N,tfoot:N,td:C,th:C,"*":T.createElement("div")},H=/complete|loaded|interactive/,D=/^\.([\w-]+)$/,O=/^#([\w-]+)$/,z=/^[\w-]+$/,R={}.toString,U={},$=T.createElement("div");return U.matches=function(e,t){if(!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,a=e.parentNode,s=!a;return s&&(a=$).appendChild(e),i=~U.qsa(a,t).indexOf(e),s&&$.removeChild(e),i},y=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},S=function(e){return e.filter(function(t,n){return e.indexOf(t)==n})},U.fragment=function(e,t){t===p&&(t=j.test(e)&&RegExp.$1),t in M||(t="*");var n=M[t];return n.innerHTML=""+e,v.each(w.call(n.childNodes),function(){n.removeChild(this)})},U.Z=function(e,t){return e=e||[],e.__proto__=arguments.callee.prototype,e.selector=t||"",e},U.isZ=function(e){return e instanceof U.Z},U.init=function(t,a){if(t){if(e(t))return v(T).ready(t);if(U.isZ(t))return t;var r;if(i(t))r=s(t);else if(n(t))r=[v.extend({},t)],t=null;else if(A.indexOf(t.nodeType)>=0||t===window)r=[t],t=null;else if(j.test(t))r=U.fragment(t.trim(),RegExp.$1),t=null;else{if(a!==p)return v(a).find(t);r=U.qsa(T,t)}return U.Z(r,t)}return U.Z()},v=function(e,t){return U.init(e,t)},v.extend=function(e){return w.call(arguments,1).forEach(function(t){for(m in t)t[m]!==p&&(e[m]=t[m])}),e},U.qsa=function(e,t){var n;return e===T&&O.test(t)?(n=e.getElementById(RegExp.$1))?[n]:E:1!==e.nodeType&&9!==e.nodeType?E:w.call(D.test(t)?e.getElementsByClassName(RegExp.$1):z.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},v.isFunction=e,v.isObject=t,v.isArray=i,v.isPlainObject=n,v.inArray=function(e,t,n){return E.indexOf.call(t,e,n)},v.trim=function(e){return e.trim()},v.uuid=0,v.map=function(e,t){var n,i,s,o=[];if(a(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&o.push(n);else for(s in e)n=t(e[s],s),null!=n&&o.push(n);return r(o)},v.each=function(e,t){var n,i;if(a(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},v.fn={forEach:E.forEach,reduce:E.reduce,push:E.push,indexOf:E.indexOf,concat:E.concat,map:function(e){return v.map(this,function(t,n){return e.call(t,n,t)})},slice:function(){return v(w.apply(this,arguments))},ready:function(e){return H.test(T.readyState)?e(v):T.addEventListener("DOMContentLoaded",function(){e(v)},!1),this},get:function(e){return e===p?w.call(this):this[e]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return this.forEach(function(t,n){e.call(t,n,t)}),this},filter:function(e){return v([].filter.call(this,function(t){return U.matches(t,e)}))},add:function(e,t){return v(S(this.concat(v(e,t))))},is:function(e){return this.length>0&&U.matches(this[0],e)},not:function(t){var n=[];if(e(t)&&t.call!==p)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):a(t)&&e(t.item)?w.call(t):v(t);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return v(n)},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!t(e)?e:v(e)},last:function(){var e=this[this.length-1];return e&&!t(e)?e:v(e)},find:function(e){var t;return t=1==this.length?U.qsa(this[0],e):this.map(function(){return U.qsa(this,e)}),v(t)},closest:function(e,t){for(var n=this[0];n&&!U.matches(n,e);)n=n!==t&&n!==T&&n.parentNode;return v(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=v.map(n,function(e){return(e=e.parentNode)&&e!==T&&t.indexOf(e)<0?(t.push(e),e):void 0});return d(t,e)},parent:function(e){return d(S(this.pluck("parentNode")),e)},children:function(e){return d(this.map(function(){return w.call(this.children)}),e)},siblings:function(e){return d(this.map(function(e,t){return w.call(t.parentNode.children).filter(function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return this.map(function(){return this[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==P(this,"").getPropertyValue("display")&&(this.style.display=c(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return this.each(function(){v(this).wrapAll(v(e)[0].cloneNode(!1))})},wrapAll:function(e){return this[0]&&(v(this[0]).before(e=v(e)),e.append(this)),this},unwrap:function(){return this.parent().each(function(){v(this).replaceWith(v(this).children())}),this},clone:function(){return v(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return(e===p?"none"==this.css("display"):e)?this.show():this.hide()},prev:function(){return v(this.pluck("previousElementSibling"))},next:function(){return v(this.pluck("nextElementSibling"))},html:function(e){return e===p?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;v(this).empty().append(h(this,e,t,n))})},text:function(e){return e===p?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e})},attr:function(e,n){var i;return"string"==typeof e&&n===p?0==this.length||1!==this[0].nodeType?p:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(i=this[0].getAttribute(e))&&e in this[0]?this[0][e]:i:this.each(function(i){if(1===this.nodeType)if(t(e))for(m in e)this.setAttribute(m,e[m]);else this.setAttribute(e,h(this,n,i,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&this.removeAttribute(e)})},prop:function(e,t){return t===p?this[0]?this[0][e]:p:this.each(function(n){this[e]=h(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+o(e),t);return null!==n?n:p},val:function(e){return e===p?this.length>0?this[0].value:p:this.each(function(t){this.value=h(this,e,t,this.value)})},offset:function(){if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}},css:function(e,t){if(t===p&&"string"==typeof e)return 0==this.length?p:this[0].style[y(e)]||P(this[0],"").getPropertyValue(e);var n="";for(m in e)"string"==typeof e[m]&&""==e[m]?this.each(function(){this.style.removeProperty(o(m))}):n+=o(m)+":"+l(m,e[m])+";";return"string"==typeof e&&(""==t?this.each(function(){this.style.removeProperty(o(e))}):n=o(e)+":"+l(e,t)),this.each(function(){this.style.cssText+=";"+n})},index:function(e){return e?this.indexOf(v(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return this.length<1?!1:u(e).test(this[0].className)},addClass:function(e){return this.each(function(t){_=[];var n=this.className,i=h(this,e,t,n);i.split(/\s+/g).forEach(function(e){v(this).hasClass(e)||_.push(e)},this),_.length&&(this.className+=(n?" ":"")+_.join(" "))})},removeClass:function(e){return this.each(function(t){return e===p?this.className="":(_=this.className,h(this,e,t,_).split(/\s+/g).forEach(function(e){_=_.replace(u(e)," ")}),void(this.className=_.trim()))})},toggleClass:function(e,t){return this.each(function(n){var i=h(this,e,n,this.className);(t===p?!v(this).hasClass(i):t)?v(this).addClass(i):v(this).removeClass(i)})}},["width","height"].forEach(function(e){v.fn[e]=function(t){var n,i=e.replace(/./,function(e){return e[0].toUpperCase()});return t===p?this[0]==window?window["inner"+i]:this[0]==T?T.documentElement["offset"+i]:(n=this.offset())&&n[e]:this.each(function(n){var i=v(this);i.css(e,h(this,t,n,i[e]()))})}}),I.forEach(function(e,n){v.fn[e]=function(){var e=v.map(arguments,function(e){return t(e)?e:U.fragment(e)});if(e.length<1)return this;var i=this.length,a=i>1,s=2>n;return this.each(function(t,r){for(var o=0;o<e.length;o++){var u=e[s?e.length-o-1:o];g(u,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||window.eval.call(window,e.innerHTML)}),a&&i-1>t&&(u=u.cloneNode(!0)),f(n,r,u)}})},v.fn[n%2?e+"To":"insert"+(n?"Before":"After")]=function(t){return v(t)[e](this),this}}),U.Z.prototype=v.fn,U.camelize=y,U.uniq=S,v.zepto=U,v}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(e){function t(e){return e._zid||(e._zid=d++)}function n(e,n,s,r){if(n=i(n),n.ns)var o=a(n.ns);return(c[t(e)]||[]).filter(function(e){return!(!e||n.e&&e.e!=n.e||n.ns&&!o.test(e.ns)||s&&t(e.fn)!==t(s)||r&&e.sel!=r)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function a(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function s(t,n,i){e.isObject(t)?e.each(t,i):t.split(/\s/).forEach(function(e){i(e,n)})}function r(n,a,r,o,u,l){l=!!l;var d=t(n),h=c[d]||(c[d]=[]);s(a,r,function(t,a){var s=u&&u(a,t),r=s||a,c=function(e){var t=r.apply(n,[e].concat(e.data));return t===!1&&e.preventDefault(),t},d=e.extend(i(t),{fn:a,proxy:c,sel:o,del:s,i:h.length});h.push(d),n.addEventListener(d.e,c,l)})}function o(e,i,a,r){var o=t(e);s(i||"",a,function(t,i){n(e,t,i,r).forEach(function(t){delete c[o][t.i],e.removeEventListener(t.e,t.proxy,!1)})})}function u(t){var n=e.extend({originalEvent:t},t);return e.each(p,function(e,i){n[e]=function(){return this[i]=f,t[e].apply(t,arguments)},n[i]=g}),n}function l(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}var c=(e.zepto.qsa,{}),d=1,h={};h.click=h.mousedown=h.mouseup=h.mousemove="MouseEvents",e.event={add:r,remove:o},e.proxy=function(n,i){if(e.isFunction(n)){var a=function(){return n.apply(i,arguments)};return a._zid=t(n),a}if("string"==typeof i)return e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){r(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){o(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,i){r(this,e,t,null,function(e,t){return function(){var n=e.apply(i,arguments);return o(i,t,e),n}})})};var f=function(){return!0},g=function(){return!1},p={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,i){var a=!1;return("blur"==n||"focus"==n)&&(e.iswebkit?n="blur"==n?"focusout":"focus"==n?"focusin":n:a=!0),this.each(function(s,o){r(o,n,i,t,function(n){return function(i){var a,s=e(i.target).closest(t,o).get(0);return s?(a=e.extend(u(i),{currentTarget:s,liveFired:o}),n.apply(s,[a].concat([].slice.call(arguments,1)))):void 0}},a)})},e.fn.undelegate=function(e,t,n){return this.each(function(){o(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i){return void 0==n||e.isFunction(n)?this.bind(t,n):this.delegate(n,t,i)},e.fn.off=function(t,n,i){return void 0==n||e.isFunction(n)?this.unbind(t,n):this.undelegate(n,t,i)},e.fn.trigger=function(t,n){return"string"==typeof t&&(t=e.Event(t)),l(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,i){var a,s;return this.each(function(r,o){a=u("string"==typeof t?e.Event(t):t),a.data=i,a.target=o,e.each(n(o,t.type||t),function(e,t){return s=t.proxy(a),a.isImmediatePropagationStopped()?!1:void 0})}),s},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){if(e)this.bind(t,e);else if(this.length)try{this.get(0)[t]()}catch(n){}return this}}),e.Event=function(e,t){var n=document.createEvent(h[e]||"Events"),i=!0;if(t)for(var a in t)"bubbles"==a?i=!!t[a]:n[a]=t[a];return n.initEvent(e,i,!0,null,null,null,null,null,null,null,null,null,null,null,null),n}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},i=e.match(/WebKit\/([\d.]+)/),a=e.match(/(Android)\s+([\d.]+)/),s=e.match(/(iPad).*OS\s([\d_]+)/),r=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),o=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=o&&e.match(/TouchPad/),l=e.match(/Kindle\/([\d.]+)/),c=e.match(/Silk\/([\d._]+)/),d=e.match(/(BlackBerry).*Version\/([\d.]+)/);(n.webkit=!!i)&&(n.version=i[1]),a&&(t.android=!0,t.version=a[2]),r&&(t.ios=t.iphone=!0,t.version=r[2].replace(/_/g,".")),s&&(t.ios=t.ipad=!0,t.version=s[2].replace(/_/g,".")),o&&(t.webos=!0,t.version=o[2]),u&&(t.touchpad=!0),d&&(t.blackberry=!0,t.version=d[2]),l&&(t.kindle=!0,t.version=l[1]),c&&(n.silk=!0,n.version=c[1]),!c&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0)}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e,t){function n(e){return e.toLowerCase()}function i(e){return a?a+e:n(e)}var a,s="",r={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},o=window.document,u=o.createElement("div"),l=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,c={};e.each(r,function(e,i){return u.style[e+"TransitionProperty"]!==t?(s="-"+n(e)+"-",a=i,!1):void 0}),c[s+"transition-property"]=c[s+"transition-duration"]=c[s+"transition-timing-function"]=c[s+"animation-name"]=c[s+"animation-duration"]="",e.fx={off:a===t&&u.style.transitionProperty===t,cssPrefix:s,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(t,n,i,a){return e.isObject(n)&&(i=n.easing,a=n.complete,n=n.duration),n&&(n/=1e3),this.anim(t,n,i,a)},e.fn.anim=function(n,i,a,r){var o,u,d,h={},f=this,g=e.fx.transitionEnd;if(i===t&&(i=.4),e.fx.off&&(i=0),"string"==typeof n)h[s+"animation-name"]=n,h[s+"animation-duration"]=i+"s",g=e.fx.animationEnd;else{for(u in n)l.test(u)?(o||(o=[]),o.push(u+"("+n[u]+")")):h[u]=n[u];o&&(h[s+"transform"]=o.join(" ")),e.fx.off||"object"!=typeof n||(h[s+"transition-property"]=Object.keys(n).join(", "),h[s+"transition-duration"]=i+"s",h[s+"transition-timing-function"]=a||"linear")}return d=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(g,arguments.callee)}e(this).css(c),r&&r.call(this)},i>0&&this.bind(g,d),setTimeout(function(){f.css(h),0>=i&&setTimeout(function(){f.each(function(){d.call(this)})},0)},0),this},u=null}(Zepto),function(e){function t(t,n,i){var a=e.Event(n);return e(t).trigger(a,i),!a.defaultPrevented}function n(e,n,i,a){return e.global?t(n||_,i,a):void 0}function i(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function a(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function s(e,t){var i=t.context;return t.beforeSend.call(i,e,t)===!1||n(t,i,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,i,"ajaxSend",[e,t])}function r(e,t,i){var a=i.context,s="success";i.success.call(a,e,s,t),n(i,a,"ajaxSuccess",[t,i,e]),u(s,t,i)}function o(e,t,i,a){var s=a.context;a.error.call(s,i,t,e),n(a,s,"ajaxError",[i,a,e]),u(t,i,a)}function u(e,t,i){var s=i.context;i.complete.call(s,t,e),n(i,s,"ajaxComplete",[t,i]),a(i)}function l(){}function c(e){return e&&(e==T?"html":e==w?"json":S.test(e)?"script":E.test(e)&&"xml")||"text"}function d(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function h(t){v(t.data)&&(t.data=e.param(t.data)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=d(t.url,t.data))}function f(t,n,i,a){var s=e.isArray(n);e.each(n,function(n,r){a&&(n=i?a:a+"["+(s?"":n)+"]"),!a&&s?t.add(r.name,r.value):(i?e.isArray(r):v(r))?f(t,r,i,n):t.add(n,r)})}var g,p,m=0,v=e.isObject,_=window.document,y=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,S=/^(?:text|application)\/javascript/i,E=/^(?:text|application)\/xml/i,w="application/json",T="text/html",b=/^\s*$/;e.active=0,e.ajaxJSONP=function(t){var n,i="jsonp"+ ++m,a=_.createElement("script"),s=function(){e(a).remove(),i in window&&(window[i]=l),u("abort",o,t)},o={abort:s};return t.error&&(a.onerror=function(){o.abort(),t.error()}),window[i]=function(s){clearTimeout(n),e(a).remove(),delete window[i],r(s,o,t)},h(t),a.src=t.url.replace(/=\?/,"="+i),e("head").append(a),t.timeout>0&&(n=setTimeout(function(){o.abort(),u("timeout",o,t)},t.timeout)),o},e.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:w,xml:"application/xml, text/xml",html:T,text:"text/plain"},crossDomain:!1,timeout:0},e.ajax=function(t){var n=e.extend({},t||{});for(g in e.ajaxSettings)void 0===n[g]&&(n[g]=e.ajaxSettings[g]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host);var a=n.dataType,u=/=\?/.test(n.url);if("jsonp"==a||u)return u||(n.url=d(n.url,"callback=?")),e.ajaxJSONP(n);n.url||(n.url=window.location.toString()),h(n);var f,m=n.accepts[a],v={},_=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,y=e.ajaxSettings.xhr();n.crossDomain||(v["X-Requested-With"]="XMLHttpRequest"),m&&(v.Accept=m,m.indexOf(",")>-1&&(m=m.split(",",2)[0]),y.overrideMimeType&&y.overrideMimeType(m)),(n.contentType||n.data&&"GET"!=n.type.toUpperCase())&&(v["Content-Type"]=n.contentType||"application/x-www-form-urlencoded"),n.headers=e.extend(v,n.headers||{}),y.onreadystatechange=function(){if(4==y.readyState){clearTimeout(f);var e,t=!1;if(y.status>=200&&y.status<300||304==y.status||0==y.status&&"file:"==_){a=a||c(y.getResponseHeader("content-type")),e=y.responseText;try{"script"==a?(1,eval)(e):"xml"==a?e=y.responseXML:"json"==a&&(e=b.test(e)?null:JSON.parse(e))}catch(i){t=i}t?o(t,"parsererror",y,n):r(e,y,n)}else o(null,"error",y,n)}};var S="async"in n?n.async:!0;y.open(n.type,n.url,S);for(p in n.headers)y.setRequestHeader(p,n.headers[p]);return s(y,n)===!1?(y.abort(),!1):(n.timeout>0&&(f=setTimeout(function(){y.onreadystatechange=l,y.abort(),o(null,"timeout",y,n)},n.timeout)),y.send(n.data?n.data:null),y)},e.get=function(t,n){return e.ajax({url:t,success:n})},e.post=function(t,n,i,a){return e.isFunction(n)&&(a=a||i,i=n,n=null),e.ajax({type:"POST",url:t,data:n,success:i,dataType:a})},e.getJSON=function(t,n){return e.ajax({url:t,success:n,dataType:"json"})},e.fn.load=function(t,n){if(!this.length)return this;var i,a=this,s=t.split(/\s/);return s.length>1&&(t=s[0],i=s[1]),e.get(t,function(t){a.html(i?e(_.createElement("div")).html(t.replace(y,"")).find(i).html():t),n&&n.call(a)}),this};var x=encodeURIComponent;e.param=function(e,t){var n=[];return n.add=function(e,t){this.push(x(e)+"="+x(t))},f(n,e,t),n.join("&").replace("%20","+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,n=[];return e(Array.prototype.slice.call(this.get(0).elements)).each(function(){t=e(this);var i=t.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&n.push({name:t.attr("name"),value:t.val()})}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(e){function t(t,i){var u=t[o],l=u&&a[u];if(void 0===i)return l||n(t);if(l){if(i in l)return l[i];var c=r(i);if(c in l)return l[c]}return s.call(e(t),i)}function n(t,n,s){var u=t[o]||(t[o]=++e.uuid),l=a[u]||(a[u]=i(t));return void 0!==n&&(l[r(n)]=s),l}function i(t){var n={};return e.each(t.attributes,function(e,t){0==t.name.indexOf("data-")&&(n[r(t.name.replace("data-",""))]=t.value)}),n}var a={},s=e.fn.data,r=e.zepto.camelize,o=e.expando="Zepto"+ +new Date;e.fn.data=function(i,a){return void 0===a?e.isPlainObject(i)?this.each(function(t,a){e.each(i,function(e,t){n(a,e,t)})}):0==this.length?void 0:t(this[0],i):this.each(function(){n(this,i,a)})},e.fn.removeData=function(t){return"string"==typeof t&&(t=t.split(/\s+/)),this.each(function(){var n=this[o],i=n&&a[n];i&&e.each(t,function(){delete i[r(this)]})})}}(Zepto);var RC={};RC.touchable="ontouchend"in document,RC.EVENT={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend"},RC.merge=function(e,t){for(var n in t)!e[n]&&t.hasOwnProperty(n)&&(e[n]=t[n]);return e},RC.Slide=function(e){var t=this;t.isSlide=!1,t.touchIdentifier=null,t.opt=RC.merge({elemQuery:"body",slideEnd:null,slideBegin:null,slideMove:null},e);var n=e.elemQuery;this.elems=[].slice.call(document.querySelectorAll(n)),t.startHandler=function(){return t.StartHandler.apply(t,arguments)},t.moveHandler=function(){return t.MoveHandler.apply(t,arguments)},t.endHandler=function(){return t.EndHandler.apply(t,arguments)},this.elems.forEach(function(e){e.addEventListener(RC.EVENT.TOUCH_START,t.startHandler),e.addEventListener(RC.EVENT.TOUCH_MOVE,t.moveHandler),e.addEventListener(RC.EVENT.TOUCH_END,t.endHandler)})},RC.Slide.prototype.cancel=function(){var e=this;this.elems.forEach(function(t){t.removeEventListener(RC.EVENT.TOUCH_START,e.startHandler,!1),t.removeEventListener(RC.EVENT.TOUCH_MOVE,e.moveHandler,!1),t.removeEventListener(RC.EVENT.TOUCH_END,e.endHandler,!1)})},RC.Slide.prototype.StartHandler=function(e){e.preventDefault();var t=this,n=e.touches;null==this.touchIdentifier?this.touchIdentifier=n[0].identifier:[].slice.apply(n).forEach(function(){}),e.touches.length>1||this.isSlide===!1&&(this.isSlide=!0,"function"==typeof this.opt.slideBegin&&t.opt.slideBegin.call(t,RC.merge({},n[0])))},RC.Slide.prototype.MoveHandler=function(e){var t=this;e.preventDefault();var n=e.targetTouches.length?e.targetTouches:e.changedTouches;(t.isSlide=!0)&&[].slice.apply(n).forEach(function(e){e.identifier==t.touchIdentifier&&"function"==typeof t.opt.slideMove&&t.opt.slideMove.call(t,RC.merge({},e))})},RC.Slide.prototype.EndHandler=function(e){var t=this;e.preventDefault();var n=e.changedTouches;t.isSlide===!0&&[].slice.apply(n).forEach(function(e){if(e.identifier==t.touchIdentifier&&(t.isSlide=!1,t.touchIdentifier=null,"function"==typeof t.opt.slideEnd)){var n=t.opt.slideEnd.call(t,RC.merge({},e));1==n&&t.cancel()}})},RC.UTILS={UrlParam:function(){var e,t,n=location.href,i=n.substring(n.indexOf("?")+1,n.length).split("&"),a={};for(e=0;t=i[e];e++)a[t.substring(0,t.indexOf("=")).toLowerCase()]=t.substring(t.indexOf("=")+1,t.length);return a}(),getUrlParam:function(e){var t,n,i=location.href,a=i.substring(i.indexOf("?")+1,i.length).split("&"),s={};for(t=0;n=a[t];t++)s[n.substring(0,n.indexOf("=")).toLowerCase()]=n.substring(n.indexOf("=")+1,n.length);var r=s[e.toLowerCase()];return"undefined"==typeof r?"":r},getUrlValue:function(e){var t=RC.UTIL.UrlParam[e.toLowerCase()];return"undefined"==typeof t?"":t},merger:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},mergerNew:function(e,t){var n=RC.UTILS.merger({},e);return RC.UTILS.merger(n,t)},removeTouchHandler:function(e,t,n){document.querySelector(e).removeEventListener(t,n,!1)}};var Game=function(){this._score=0,this._hitCombo=0,this._maxCombo=0,this.init()};Game.prototype.init=function(){},Game.prototype.assetLoadStatus=!0,Game.prototype.loadImg=function(e){var t=new AssetLoad({success:e}),n=["assets/images/pa0.png","assets/images/pa1.png","assets/images/pa2.png","assets/images/pa3.png","assets/images/pa4.png","assets/images/pa4.png","assets/images/dongzuo/donghuaM1.png","assets/images/dongzuo/donghuaM2.png","assets/images/dongzuo/donghuaM3.png","assets/images/dongzuo/donghuaM4.png","assets/images/dongzuo/donghuaM5.png","assets/images/dongzuo/donghuaM6.png","assets/images/dongzuo/donghuaM7.png","assets/images/dongzuo/donghuaM8.png","assets/images/dongzuo/donghuaM9.png","assets/images/dongzuo/donghuaW1.png","assets/images/dongzuo/donghuaW2.png","assets/images/dongzuo/donghuaW3.png","assets/images/dongzuo/donghuaW4.png","assets/images/dongzuo/donghuaW5.png","assets/images/dongzuo/donghuaW6.png","assets/images/dongzuo/donghuaW7.png","assets/images/dongzuo/donghuaW8.png","assets/images/dongzuo/donghuaW9.png"];
n.forEach(function(e){t.preLoadImg(e)}),t.load()},Game.prototype.setScore=function(e){this._score=e},Game.prototype.getScore=function(){return this._score},Game.prototype.setTimer=function(e){this.timer=e},Game.prototype.dropTo=function(e,t){this.timer.running!==!1&&($(e).data("category")===$(t).data("category")?this.goal(e,t):this.failed(e,t),this.refreshItem(e.parent()))},Game.prototype.goal=function(){this.setScore(this._score+1),Game.View.setScore(this._score)},Game.prototype.start=function(e){function t(){console.log("go"),null!=n.timer&&($("#gameIntro").hide(),$("#gameScreen").show(),n.timer.run(),"function"==typeof e&&e())}var n=this;return this.timer.running===!0?void(console&&console.log("游戏正在进行，请勿作弊.")):void(n.assetLoadStatus?(console.log("no load"),t()):($("#gameIntro .content").css("visibility","hidden"),$("#prograss").show(),this.loadImg(function(){n.assetLoadStatus=!0,t()})))},Game.prototype.reset=function(){this._score=0,this._hitCombo=0,this._maxCombo=0,Game.View.setScore(this._score)},Game.prototype.replay=function(){console&&console.log("重启游戏.");try{this.reset(),this.timer.reset(),this.start()}catch(e){console.log(e.stack)}},Game.Utils=Game.Utils||{},Game.prototype.stop=function(){this.timer.running=!1},Game.View={scoreTimeId:null,setTimer:function(e,t){var n=t-e;0!=n&&$("#timer").html((10>n?"0"+n:n)+"<span>秒</span>")},setHitCombo:function(e){$("#hitCombo").html(e)},setScore:function(e){e.toString().length;$("#score").html(e+"<span>次</span>").addClass("hit-count-anim"),setTimeout(function(){$("#score").removeClass("hit-count-anim")},100)},changeStatus:function(e,t){var n=$(e).parent(),i=t?".scored":".failed";n.find(i).show(),null!==Game.View.scoreTimeId&&clearTimeout(Game.View.scoreTimeId),Game.View.scoreTimeId=setTimeout(function(){Game.View.hideStatus()},1e3)},hideStatus:function(){$(".scored").hide(),$(".failed").hide()},reset:function(){$("#timer").html(gameTime+"<span>秒</span>")}},Game.Time=function(e){this.init(e)},Game.Time.prototype.init=function(e){this.sum=e.sum||30,this.add=e.add,this.minus=e.minus,this.countFunc=e.countFunc,this.end=e.end,this.timeId=null,this.running=!1,this.current=0},Game.Time.prototype.run=function(){var e=this;this.running=!0,e.timeId=setTimeout(function(){e.current<e.sum-1?(e.current++,e.run.call(e),e.countFunc(e.current,e.sum)):(e.running=!1,console&&console.log("game over"),"function"==typeof e.end&&e.end.call(e))},1e3)},Game.Time.prototype.stop=function(){clearTimeout(this.timeId)},Game.Time.prototype.reset=function(){this.running=!1,clearTimeout(this.timeId),this.current=0,Game.View.reset()},Game.Time.prototype.doMinus=function(){this.current+=this.minus,this.current>this.sum&&(this.current=this.sum),this.countFunc(this.current,this.sum)},Game.Animate={bAnimate:!1,timeId:null,timeDelay:400,timeBegin:0,timeNow:0,frameObj:{man_0:"assets/images/dongzuo/donghuaM1.png",man_1:"assets/images/dongzuo/donghuaM2.png",man_2:"assets/images/dongzuo/donghuaM3.png",man_3:"assets/images/dongzuo/donghuaM4.png",man_4:"assets/images/dongzuo/donghuaM5.png",man_5:"assets/images/dongzuo/donghuaM6.png",man_6:"assets/images/dongzuo/donghuaM7.png",man_7:"assets/images/dongzuo/donghuaM8.png",man_8:"assets/images/dongzuo/donghuaM9.png",woman_0:"assets/images/dongzuo/donghuaW1.png",woman_1:"assets/images/dongzuo/donghuaW2.png",woman_2:"assets/images/dongzuo/donghuaW3.png",woman_3:"assets/images/dongzuo/donghuaW4.png",woman_4:"assets/images/dongzuo/donghuaW5.png",woman_5:"assets/images/dongzuo/donghuaW6.png",woman_6:"assets/images/dongzuo/donghuaW7.png",woman_7:"assets/images/dongzuo/donghuaW8.png",woman_8:"assets/images/dongzuo/donghuaW9.png"},twitch:function(e,t,n,i){function a(e,t,n,i,r){s.timeNow=new Date,s.timeNow-s.timeBegin<s.timeDelay&&("undefined"==typeof r||10>r)?(Game.Animate.bAnimate=!0,"undefined"==typeof r&&(r="right"===i?1:2),$("#gameScreen .shenti img").attr("src",Game.Animate.frameObj[t+"_"+r]),s.timeId=setTimeout(function(){a(e,t,n+1,i,r+2)},100)):(s.bAnimate=!1,key=t+"_0",$("#gameScreen .shenti img").attr("src",Game.Animate.frameObj[key]),s.timeBegin=0,s.timeNow=0)}var s=this;Game.Animate.bAnimate===!1&&(this.timeBegin=new Date,this.bAnimate=!0,a(e,t,n,i))}};var AssetLoad=function(e){this.conf=e,this.urlList=[],this.sum=0,this.current=0,this.errorList=[]};AssetLoad.prototype.preLoadImg=function(e){this.urlList.indexOf(e)<0&&this.urlList.push(e)},AssetLoad.prototype.load=function(){var e=this;e.current=0,e.urlList.forEach(function(t){e.loadImage(t)})},AssetLoad.prototype.loadImage=function(e){var t=this,n=new Image;n.onload=function(){t.showPrograss.apply(t,arguments)},n.onerror=function(e){t.errorList.push(e.message||e),t.showPrograss.apply(t,arguments)},n.src=e},AssetLoad.prototype.showPrograss=function(){this.current++;var e=this.current/this.urlList.length*100,t=document.querySelector("#percent");t.innerHTML=(0|e)+"%",this.current==this.urlList.length&&($("#progress").hide(),this.success())},AssetLoad.prototype.success=function(){"function"==typeof this.conf.success&&this.conf.success()};var WeixinApi=function(){"use strict";function e(e,t){t=t||{};var n=function(e){WeixinJSBridge.invoke("shareTimeline",{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.title,title:e.desc,img_width:"120",img_height:"120"},function(e){switch(e.err_msg){case"share_timeline:cancel":t.cancel&&t.cancel(e);break;case"share_timeline:confirm":case"share_timeline:ok":t.confirm&&t.confirm(e);break;case"share_timeline:fail":default:t.fail&&t.fail(e)}t.all&&t.all(e)})};WeixinJSBridge.on("menu:share:timeline",function(i){t.async&&t.ready?(window._wx_loadedCb_=t.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),t.dataLoaded=function(e){window._wx_loadedCb_(e),n(e)},t.ready&&t.ready(i)):(t.ready&&t.ready(i),n(e))})}function t(e,t){t=t||{};var n=function(e){WeixinJSBridge.invoke("sendAppMessage",{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"120",img_height:"120"},function(e){switch(e.err_msg){case"send_app_msg:cancel":t.cancel&&t.cancel(e);break;case"send_app_msg:confirm":case"send_app_msg:ok":t.confirm&&t.confirm(e);break;case"send_app_msg:fail":default:t.fail&&t.fail(e)}t.all&&t.all(e)})};WeixinJSBridge.on("menu:share:appmessage",function(i){t.async&&t.ready?(window._wx_loadedCb_=t.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),t.dataLoaded=function(e){window._wx_loadedCb_(e),n(e)},t.ready&&t.ready(i)):(t.ready&&t.ready(i),n(e))})}function n(e,t){t=t||{};var n=function(e){WeixinJSBridge.invoke("shareWeibo",{content:e.desc,url:e.link},function(e){switch(e.err_msg){case"share_weibo:cancel":t.cancel&&t.cancel(e);break;case"share_weibo:confirm":case"share_weibo:ok":t.confirm&&t.confirm(e);break;case"share_weibo:fail":default:t.fail&&t.fail(e)}t.all&&t.all(e)})};WeixinJSBridge.on("menu:share:weibo",function(i){t.async&&t.ready?(window._wx_loadedCb_=t.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),t.dataLoaded=function(e){window._wx_loadedCb_(e),n(e)},t.ready&&t.ready(i)):(t.ready&&t.ready(i),n(e))})}function i(e,t){t=t||{},WeixinJSBridge.invoke("addContact",{webtype:"1",username:e},function(e){var n=!e.err_msg||"add_contact:ok"==e.err_msg||"add_contact:added"==e.err_msg;n?t.success&&t.success(e):t.fail&&t.fail(e)})}function a(e,t){e&&t&&0!=t.length&&WeixinJSBridge.invoke("imagePreview",{current:e,urls:t})}function s(){WeixinJSBridge.call("showOptionMenu")}function r(){WeixinJSBridge.call("hideOptionMenu")}function o(){WeixinJSBridge.call("showToolbar")}function u(){WeixinJSBridge.call("hideToolbar")}function l(e){e&&"function"==typeof e&&WeixinJSBridge.invoke("getNetworkType",{},function(t){e(t.err_msg)})}function c(){WeixinJSBridge.call("closeWindow")}function d(e){if(e&&"function"==typeof e){var t=this,n=function(){e(t)};"undefined"==typeof window.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n)):n()}}return{version:"1.9",ready:d,shareToTimeline:e,shareToWeibo:n,shareToFriend:t,addContact:i,showOptionMenu:s,hideOptionMenu:r,showToolbar:o,hideToolbar:u,getNetworkType:l,imagePreview:a,closeWindow:c}}();this.createjs=this.createjs||{},function(){var e=createjs.SoundJS=createjs.SoundJS||{};e.version="0.5.2",e.buildDate="Thu, 12 Dec 2013 23:33:37 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(){},t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t._listeners=null,t._captureListeners=null,t.initialize=function(){},t.addEventListener=function(e,t,n){var i;i=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var a=i[e];return a&&this.removeEventListener(e,t,n),a=i[e],a?a.push(t):i[e]=[t],t},t.on=function(e,t,n,i,a,s){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,a),i&&e.remove()},s)},t.removeEventListener=function(e,t,n){var i=n?this._captureListeners:this._listeners;if(i){var a=i[e];if(a)for(var s=0,r=a.length;r>s;s++)if(a[s]==t){1==r?delete i[e]:a.splice(s,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e,t){if("string"==typeof e){var n=this._listeners;if(!n||!n[e])return!1;e=new createjs.Event(e)}if(e.target=t||this,e.bubbles&&this.parent){for(var i=this,a=[i];i.parent;)a.push(i=i.parent);var s,r=a.length;for(s=r-1;s>=0&&!e.propagationStopped;s--)a[s]._dispatchEvent(e,1+(0==s));for(s=1;r>s&&!e.propagationStopped;s++)a[s]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var n,i=1==t?this._captureListeners:this._listeners;if(e&&i){var a=i[e.type];if(!a||!(n=a.length))return;e.currentTarget=this,e.eventPhase=t,e.removed=!1,a=a.slice();for(var s=0;n>s&&!e.immediatePropagationStopped;s++){var r=a[s];r.handleEvent?r.handleEvent(e):r(e),e.removed&&(this.off(e.type,r,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e,t,n){this.initialize(e,t,n)},t=e.prototype;t.type=null,t.target=null,t.currentTarget=null,t.eventPhase=0,t.bubbles=!1,t.cancelable=!1,t.timeStamp=0,t.defaultPrevented=!1,t.propagationStopped=!1,t.immediatePropagationStopped=!1,t.removed=!1,t.initialize=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=(new Date).getTime()},t.preventDefault=function(){this.defaultPrevented=!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){"use strict";createjs.indexOf=function(e,t){for(var n=0,i=e.length;i>n;n++)if(t===e[n])return n;return-1}}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(n))}}}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Sound cannot be instantiated"}function t(e,t){this.init(e,t)}function n(){this.isDefault=!0,this.addEventListener=this.removeEventListener=this.removeAllEventListeners=this.dispatchEvent=this.hasEventListener=this._listeners=this._interrupt=this._playFailed=this.pause=this.resume=this.play=this._beginPlaying=this._cleanUp=this.stop=this.setMasterVolume=this.setVolume=this.mute=this.setMute=this.getMute=this.setPan=this.getPosition=this.setPosition=this.playFailed=function(){return!1},this.getVolume=this.getPan=this.getDuration=function(){return 0},this.playState=e.PLAY_FAILED,this.toString=function(){return"[Sound Default Sound Instance]"}}function i(){}var a=e;a.DELIMITER="|",a.INTERRUPT_ANY="any",a.INTERRUPT_EARLY="early",a.INTERRUPT_LATE="late",a.INTERRUPT_NONE="none",a.PLAY_INITED="playInited",a.PLAY_SUCCEEDED="playSucceeded",a.PLAY_INTERRUPTED="playInterrupted",a.PLAY_FINISHED="playFinished",a.PLAY_FAILED="playFailed",a.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],a.EXTENSION_MAP={m4a:"mp4"},a.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/,a.defaultInterruptBehavior=a.INTERRUPT_NONE,a.alternateExtensions=[],a._lastID=0,a.activePlugin=null,a._pluginsRegistered=!1,a._masterVolume=1,a._masterMute=!1,a._instances=[],a._idHash={},a._preloadHash={},a._defaultSoundInstance=null,a.addEventListener=null,a.removeEventListener=null,a.removeAllEventListeners=null,a.dispatchEvent=null,a.hasEventListener=null,a._listeners=null,createjs.EventDispatcher.initialize(a),a._sendFileLoadEvent=function(e){if(a._preloadHash[e])for(var t=0,n=a._preloadHash[e].length;n>t;t++){var i=a._preloadHash[e][t];if(a._preloadHash[e][t]=!0,a.hasEventListener("fileload")){var s=new createjs.Event("fileload");s.src=i.src,s.id=i.id,s.data=i.data,a.dispatchEvent(s)}}},a.getPreloadHandlers=function(){return{callback:createjs.proxy(a.initLoad,a),types:["sound"],extensions:a.SUPPORTED_EXTENSIONS}},a.registerPlugin=function(e){try{console.log("createjs.Sound.registerPlugin has been deprecated. Please use registerPlugins.")}catch(t){}return a._registerPlugin(e)},a._registerPlugin=function(e){return a._pluginsRegistered=!0,null==e?!1:e.isSupported()?(a.activePlugin=new e,!0):!1},a.registerPlugins=function(e){for(var t=0,n=e.length;n>t;t++){var i=e[t];if(a._registerPlugin(i))return!0}return!1},a.initializeDefaultPlugins=function(){return null!=a.activePlugin?!0:a._pluginsRegistered?!1:a.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},a.isReady=function(){return null!=a.activePlugin},a.getCapabilities=function(){return null==a.activePlugin?null:a.activePlugin._capabilities},a.getCapability=function(e){return null==a.activePlugin?null:a.activePlugin._capabilities[e]},a.initLoad=function(e,t,n,i,s){e=e.replace(s,"");var r=a.registerSound(e,n,i,!1,s);return null==r?!1:r},a.registerSound=function(e,n,i,s,r){if(!a.initializeDefaultPlugins())return!1;if(e instanceof Object&&(r=n,n=e.id,i=e.data,e=e.src),a.alternateExtensions.length)var o=a._parsePath2(e,"sound",n,i);else var o=a._parsePath(e,"sound",n,i);if(null==o)return!1;null!=r&&(e=r+e,o.src=r+o.src),null!=n&&(a._idHash[n]=o.src);var u=null;null!=i&&(isNaN(i.channels)?isNaN(i)||(u=parseInt(i)):u=parseInt(i.channels));var l=a.activePlugin.register(o.src,u);if(null!=l&&(null!=l.numChannels&&(u=l.numChannels),t.create(o.src,u),null!=i&&isNaN(i)?i.channels=o.data.channels=u||t.maxPerChannel():i=o.data=u||t.maxPerChannel(),null!=l.tag?o.tag=l.tag:l.src&&(o.src=l.src),null!=l.completeHandler&&(o.completeHandler=l.completeHandler),l.type&&(o.type=l.type)),0!=s)if(a._preloadHash[o.src]||(a._preloadHash[o.src]=[]),a._preloadHash[o.src].push({src:e,id:n,data:i}),1==a._preloadHash[o.src].length)a.activePlugin.preload(o.src,l);else if(1==a._preloadHash[o.src][0])return!0;return o},a.registerManifest=function(e,t){for(var n=[],i=0,a=e.length;a>i;i++)n[i]=createjs.Sound.registerSound(e[i].src,e[i].id,e[i].data,e[i].preload,t);return n},a.removeSound=function(e,n){if(null==a.activePlugin)return!1;if(e instanceof Object&&(e=e.src),e=a._getSrcById(e),a.alternateExtensions.length)var i=a._parsePath2(e);else var i=a._parsePath(e);if(null==i)return!1;null!=n&&(i.src=n+i.src),e=i.src;for(var s in a._idHash)a._idHash[s]==e&&delete a._idHash[s];return t.removeSrc(e),delete a._preloadHash[e],a.activePlugin.removeSound(e),!0},a.removeManifest=function(e,t){for(var n=[],i=0,a=e.length;a>i;i++)n[i]=createjs.Sound.removeSound(e[i].src,t);return n},a.removeAllSounds=function(){a._idHash={},a._preloadHash={},t.removeAll(),a.activePlugin.removeAllSounds()},a.loadComplete=function(e){if(a.alternateExtensions.length)var t=a._parsePath2(e,"sound");else var t=a._parsePath(e,"sound");return e=a._getSrcById(t?t.src:e),1==a._preloadHash[e][0]},a._parsePath=function(e,t,n,i){"string"!=typeof e&&(e=e.toString());var s=e.split(a.DELIMITER);if(s.length>1)try{console.log('createjs.Sound.DELIMITER "|" loading approach has been deprecated. Please use the new alternateExtensions property.')}catch(r){}for(var o={type:t||"sound",id:n,data:i},u=a.getCapabilities(),l=0,c=s.length;c>l;l++){var d=s[l],h=d.match(a.FILE_PATTERN);if(null==h)return!1;var f=h[4],g=h[5];if(u[g]&&createjs.indexOf(a.SUPPORTED_EXTENSIONS,g)>-1)return o.name=f,o.src=d,o.extension=g,o}return null},a._parsePath2=function(e,t,n,i){"string"!=typeof e&&(e=e.toString());var s=e.match(a.FILE_PATTERN);if(null==s)return!1;for(var r=s[4],o=s[5],u=a.getCapabilities(),l=0;!u[o];)if(o=a.alternateExtensions[l++],l>a.alternateExtensions.length)return null;e=e.replace("."+s[5],"."+o);var c={type:t||"sound",id:n,data:i};return c.name=r,c.src=e,c.extension=o,c},a.play=function(e,t,n,i,s,r,o){var u=a.createInstance(e),l=a._playInstance(u,t,n,i,s,r,o);return l||u.playFailed(),u},a.createInstance=function(n){if(!a.initializeDefaultPlugins())return a._defaultSoundInstance;if(n=a._getSrcById(n),a.alternateExtensions.length)var i=a._parsePath2(n,"sound");else var i=a._parsePath(n,"sound");var s=null;return null!=i&&null!=i.src?(t.create(i.src),s=a.activePlugin.create(i.src)):s=e._defaultSoundInstance,s.uniqueId=a._lastID++,s},a.setVolume=function(e){if(null==Number(e))return!1;if(e=Math.max(0,Math.min(1,e)),a._masterVolume=e,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(e))for(var t=this._instances,n=0,i=t.length;i>n;n++)t[n].setMasterVolume(e)},a.getVolume=function(){return a._masterVolume},a.setMute=function(e){if(null==e||void 0==e)return!1;if(this._masterMute=e,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(e))for(var t=this._instances,n=0,i=t.length;i>n;n++)t[n].setMasterMute(e);return!0},a.getMute=function(){return this._masterMute},a.stop=function(){for(var e=this._instances,t=e.length;t--;)e[t].stop()},a._playInstance=function(e,t,n,i,s,r,o){if(t instanceof Object&&(n=t.delay,i=t.offset,s=t.loop,r=t.volume,o=t.pan,t=t.interrupt),t=t||a.defaultInterruptBehavior,null==n&&(n=0),null==i&&(i=e.getPosition()),null==s&&(s=0),null==r&&(r=e.volume),null==o&&(o=e.pan),0==n){var u=a._beginPlaying(e,t,i,s,r,o);if(!u)return!1}else{var l=setTimeout(function(){a._beginPlaying(e,t,i,s,r,o)},n);e._delayTimeoutId=l}return this._instances.push(e),!0},a._beginPlaying=function(e,n,i,a,s,r){if(!t.add(e,n))return!1;var o=e._beginPlaying(i,a,s,r);if(!o){var u=createjs.indexOf(this._instances,e);return u>-1&&this._instances.splice(u,1),!1}return!0},a._getSrcById=function(e){return null==a._idHash||null==a._idHash[e]?e:a._idHash[e]},a._playFinished=function(e){t.remove(e);var n=createjs.indexOf(this._instances,e);n>-1&&this._instances.splice(n,1)},createjs.Sound=e,t.channels={},t.create=function(e,n){var i=t.get(e);return null==i?(t.channels[e]=new t(e,n),!0):!1},t.removeSrc=function(e){var n=t.get(e);return null==n?!1:(n.removeAll(),delete t.channels[e],!0)},t.removeAll=function(){for(var e in t.channels)t.channels[e].removeAll();t.channels={}},t.add=function(e,n){var i=t.get(e.src);return null==i?!1:i.add(e,n)},t.remove=function(e){var n=t.get(e.src);return null==n?!1:(n.remove(e),!0)},t.maxPerChannel=function(){return s.maxDefault},t.get=function(e){return t.channels[e]};var s=t.prototype;s.src=null,s.max=null,s.maxDefault=100,s.length=0,s.init=function(e,t){this.src=e,this.max=t||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},s.get=function(e){return this._instances[e]},s.add=function(e,t){return this.getSlot(t,e)?(this._instances.push(e),this.length++,!0):!1},s.remove=function(e){var t=createjs.indexOf(this._instances,e);return-1==t?!1:(this._instances.splice(t,1),this.length--,!0)},s.removeAll=function(){for(var e=this.length-1;e>=0;e--)this._instances[e].stop()},s.getSlot=function(t){for(var n,i,a=0,s=this.max;s>a;a++){if(n=this.get(a),null==n)return!0;(t!=e.INTERRUPT_NONE||n.playState==e.PLAY_FINISHED)&&(0!=a?n.playState==e.PLAY_FINISHED||n.playState==e.PLAY_INTERRUPTED||n.playState==e.PLAY_FAILED?i=n:(t==e.INTERRUPT_EARLY&&n.getPosition()<i.getPosition()||t==e.INTERRUPT_LATE&&n.getPosition()>i.getPosition())&&(i=n):i=n)}return null!=i?(i._interrupt(),this.remove(i),!0):!1},s.toString=function(){return"[Sound SoundChannel]"},e._defaultSoundInstance=new n,i.init=function(){var e=window.navigator.userAgent;i.isFirefox=e.indexOf("Firefox")>-1,i.isOpera=null!=window.opera,i.isChrome=e.indexOf("Chrome")>-1,i.isIOS=e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1,i.isAndroid=e.indexOf("Android")>-1,i.isBlackberry=e.indexOf("Blackberry")>-1},i.init(),createjs.Sound.BrowserDetect=i}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this._init()}var t=e;t._capabilities=null,t.isSupported=function(){var e=createjs.Sound.BrowserDetect.isIOS||createjs.Sound.BrowserDetect.isAndroid||createjs.Sound.BrowserDetect.isBlackberry;return"file:"!=location.protocol||e||this._isFileXHRSupported()?(t._generateCapabilities(),null==t.context?!1:!0):!1},t._isFileXHRSupported=function(){var e=!0,t=new XMLHttpRequest;try{t.open("GET","fail.fail",!1)}catch(n){return e=!1}t.onerror=function(){e=!1},t.onload=function(){e=404==this.status||200==this.status||0==this.status&&""!=this.response};try{t.send()}catch(n){e=!1}return e},t._generateCapabilities=function(){if(null==t._capabilities){var e=document.createElement("audio");if(null==e.canPlayType)return null;if(window.webkitAudioContext)t.context=new webkitAudioContext;else{if(!window.AudioContext)return null;t.context=new AudioContext}t._compatibilitySetUp(),t.playEmptySound(),t._capabilities={panning:!0,volume:!0,tracks:-1};for(var n=createjs.Sound.SUPPORTED_EXTENSIONS,i=createjs.Sound.EXTENSION_MAP,a=0,s=n.length;s>a;a++){var r=n[a],o=i[r]||r;t._capabilities[r]="no"!=e.canPlayType("audio/"+r)&&""!=e.canPlayType("audio/"+r)||"no"!=e.canPlayType("audio/"+o)&&""!=e.canPlayType("audio/"+o)}t.context.destination.numberOfChannels<2&&(t._capabilities.panning=!1),t.dynamicsCompressorNode=t.context.createDynamicsCompressor(),t.dynamicsCompressorNode.connect(t.context.destination),t.gainNode=t.context.createGain(),t.gainNode.connect(t.dynamicsCompressorNode)}},t._compatibilitySetUp=function(){if(!t.context.createGain){t.context.createGain=t.context.createGainNode;var e=t.context.createBufferSource();e.__proto__.start=e.__proto__.noteGrainOn,e.__proto__.stop=e.__proto__.noteOff,this._panningModel=0}},t.playEmptySound=function(){var e=this.context.createBuffer(1,1,22050),t=this.context.createBufferSource();t.buffer=e,t.connect(this.context.destination),t.start(0,0,0)};var n=e.prototype;n._capabilities=null,n._volume=1,n.context=null,n._panningModel="equalpower",n.dynamicsCompressorNode=null,n.gainNode=null,n._arrayBuffers=null,n._init=function(){this._capabilities=t._capabilities,this._arrayBuffers={},this.context=t.context,this.gainNode=t.gainNode,this.dynamicsCompressorNode=t.dynamicsCompressorNode},n.register=function(e){this._arrayBuffers[e]=!0;var t=new createjs.WebAudioPlugin.Loader(e,this);return{tag:t}},n.isPreloadStarted=function(e){return null!=this._arrayBuffers[e]},n.isPreloadComplete=function(e){return!(null==this._arrayBuffers[e]||1==this._arrayBuffers[e])},n.removeSound=function(e){delete this._arrayBuffers[e]},n.removeAllSounds=function(){this._arrayBuffers={}},n.addPreloadResults=function(e,t){this._arrayBuffers[e]=t},n._handlePreloadComplete=function(){createjs.Sound._sendFileLoadEvent(this.src)},n.preload=function(e){this._arrayBuffers[e]=!0;var t=new createjs.WebAudioPlugin.Loader(e,this);t.onload=this._handlePreloadComplete,t.load()},n.create=function(e){return this.isPreloadStarted(e)||this.preload(e),new createjs.WebAudioPlugin.SoundInstance(e,this)},n.setVolume=function(e){return this._volume=e,this._updateVolume(),!0},n._updateVolume=function(){var e=createjs.Sound._masterMute?0:this._volume;e!=this.gainNode.gain.value&&(this.gainNode.gain.value=e)},n.getVolume=function(){return this._volume},n.setMute=function(){return this._updateVolume(),!0},n.toString=function(){return"[WebAudioPlugin]"},createjs.WebAudioPlugin=e}(),function(){"use strict";function e(e,t){this._init(e,t)}var t=e.prototype=new createjs.EventDispatcher;t.src=null,t.uniqueId=-1,t.playState=null,t._owner=null,t._offset=0,t._delay=0,t._volume=1;try{Object.defineProperty(t,"volume",{get:function(){return this._volume},set:function(e){return null==Number(e)?!1:(e=Math.max(0,Math.min(1,e)),this._volume=e,void this._updateVolume())}})}catch(n){}t._pan=0;try{Object.defineProperty(t,"pan",{get:function(){return this._pan},set:function(e){return this._owner._capabilities.panning&&null!=Number(e)?(e=Math.max(-1,Math.min(1,e)),this._pan=e,void this.panNode.setPosition(e,0,-.5)):!1}})}catch(n){}t._duration=0,t._remainingLoops=0,t._delayTimeoutId=null,t._soundCompleteTimeout=null,t.gainNode=null,t.panNode=null,t.sourceNode=null,t._sourceNodeNext=null,t._muted=!1,t._paused=!1,t._startTime=0,t._endedHandler=null,t._sendEvent=function(e){var t=new createjs.Event(e);this.dispatchEvent(t)},t._init=function(e,t){this._owner=t,this.src=e,this.gainNode=this._owner.context.createGain(),this.panNode=this._owner.context.createPanner(),this.panNode.panningModel=this._owner._panningModel,this.panNode.connect(this.gainNode),this._owner.isPreloadComplete(this.src)&&(this._duration=1e3*this._owner._arrayBuffers[this.src].duration),this._endedHandler=createjs.proxy(this._handleSoundComplete,this)},t._cleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._delayTimeoutId),clearTimeout(this._soundCompleteTimeout),this._startTime=0,null!=window.createjs&&createjs.Sound._playFinished(this)},t._cleanUpAudioNode=function(e){return e&&(e.stop(0),e.disconnect(this.panNode),e=null),e},t._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._paused=!1,this._sendEvent("interrupted")},t._handleSoundReady=function(){if(null!=window.createjs){if(1e3*this._offset>this.getDuration())return void this.playFailed();this._offset<0&&(this._offset=0),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._paused=!1,this.gainNode.connect(this._owner.gainNode);var e=this._owner._arrayBuffers[this.src].duration;this.sourceNode=this._createAndPlayAudioNode(this._owner.context.currentTime-e,this._offset),this._duration=1e3*e,this._startTime=this.sourceNode.startTime-this._offset,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-this._offset)),0!=this._remainingLoops&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._startTime,0))}},t._createAndPlayAudioNode=function(e,t){var n=this._owner.context.createBufferSource();return n.buffer=this._owner._arrayBuffers[this.src],n.connect(this.panNode),this._owner.context.currentTime,n.startTime=e+n.buffer.duration,n.start(n.startTime,t,n.buffer.duration-t),n},t.play=function(e,t,n,i,a,s){this._cleanUp(),createjs.Sound._playInstance(this,e,t,n,i,a,s)},t._beginPlaying=function(e,t,n,i){return null!=window.createjs&&this.src?(this._offset=e/1e3,this._remainingLoops=t,this.volume=n,this.pan=i,this._owner.isPreloadComplete(this.src)?(this._handleSoundReady(null),this._sendEvent("succeeded"),1):void this.playFailed()):void 0},t.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this._paused=!0,this._offset=this._owner.context.currentTime-this._startTime,this._cleanUpAudioNode(this.sourceNode),this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(),clearTimeout(this._delayTimeoutId),clearTimeout(this._soundCompleteTimeout),!0)},t.resume=function(){return this._paused?(this._handleSoundReady(null),!0):!1},t.stop=function(){return this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._offset=0,!0},t.setVolume=function(e){return this.volume=e,!0},t._updateVolume=function(){var e=this._muted?0:this._volume;return e!=this.gainNode.gain.value?(this.gainNode.gain.value=e,!0):!1},t.getVolume=function(){return this.volume},t.setMute=function(e){return null==e||void 0==e?!1:(this._muted=e,this._updateVolume(),!0)},t.getMute=function(){return this._muted},t.setPan=function(e){return this.pan=e,this.pan!=e?!1:void 0},t.getPan=function(){return this.pan},t.getPosition=function(){if(this._paused||null==this.sourceNode)var e=this._offset;else var e=this._owner.context.currentTime-this._startTime;return 1e3*e},t.setPosition=function(e){return this._offset=e/1e3,this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._cleanUpAudioNode(this.sourceNode),this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout)),this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||this._handleSoundReady(null),!0},t.getDuration=function(){return this._duration},t._handleSoundComplete=function(){return this._offset=0,0!=this._remainingLoops?(this._remainingLoops--,this._sourceNodeNext?(this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._startTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._startTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)):this._handleSoundReady(null),void this._sendEvent("loop")):void(null!=window.createjs&&(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete")))},t.playFailed=function(){null!=window.createjs&&(this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed"))},t.toString=function(){return"[WebAudioPlugin SoundInstance]"},createjs.WebAudioPlugin.SoundInstance=e}(),function(){"use strict";function e(e,t){this._init(e,t)}var t=e.prototype;t.request=null,t.owner=null,t.progress=-1,t.src=null,t.originalSrc=null,t.result=null,t.onload=null,t.onprogress=null,t.onError=null,t._init=function(e,t){this.src=e,this.originalSrc=e,this.owner=t},t.load=function(e){null!=e&&(this.src=e),this.request=new XMLHttpRequest,this.request.open("GET",this.src,!0),this.request.responseType="arraybuffer",this.request.onload=createjs.proxy(this.handleLoad,this),this.request.onError=createjs.proxy(this.handleError,this),this.request.onprogress=createjs.proxy(this.handleProgress,this),this.request.send()},t.handleProgress=function(e,t){this.progress=e/t,null!=this.onprogress&&this.onprogress({loaded:e,total:t,progress:this.progress})},t.handleLoad=function(){this.owner.context.decodeAudioData(this.request.response,createjs.proxy(this.handleAudioDecoded,this),createjs.proxy(this.handleError,this))},t.handleAudioDecoded=function(e){this.progress=1,this.result=e,this.src=this.originalSrc,this.owner.addPreloadResults(this.src,this.result),this.onload&&this.onload()},t.handleError=function(e){this.owner.removeSound(this.src),this.onerror&&this.onerror(e)
},t.toString=function(){return"[WebAudioPlugin Loader]"},createjs.WebAudioPlugin.Loader=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this._init()}var t=e;t.MAX_INSTANCES=30,t._AUDIO_READY="canplaythrough",t._AUDIO_ENDED="ended",t._AUDIO_SEEKED="seeked",t._AUDIO_STALLED="stalled",t._capabilities=null,t.enableIOS=!1,t.isSupported=function(){if(createjs.Sound.BrowserDetect.isIOS&&!t.enableIOS)return!1;t._generateCapabilities();var e=t.tag;return null==e||null==t._capabilities?!1:!0},t._generateCapabilities=function(){if(null==t._capabilities){var e=t.tag=document.createElement("audio");if(null==e.canPlayType)return null;t._capabilities={panning:!0,volume:!0,tracks:-1};for(var n=createjs.Sound.SUPPORTED_EXTENSIONS,i=createjs.Sound.EXTENSION_MAP,a=0,s=n.length;s>a;a++){var r=n[a],o=i[r]||r;t._capabilities[r]="no"!=e.canPlayType("audio/"+r)&&""!=e.canPlayType("audio/"+r)||"no"!=e.canPlayType("audio/"+o)&&""!=e.canPlayType("audio/"+o)}}};var n=e.prototype;n._capabilities=null,n._audioSources=null,n.defaultNumChannels=2,n.loadedHandler=null,n._init=function(){this._capabilities=t._capabilities,this._audioSources={}},n.register=function(e,t){this._audioSources[e]=!0;for(var n=createjs.HTMLAudioPlugin.TagPool.get(e),i=null,a=t||this.defaultNumChannels,s=0;a>s;s++)i=this._createTag(e),n.add(i);if(i.id=e,this.loadedHandler=createjs.proxy(this._handleTagLoad,this),i.addEventListener&&i.addEventListener("canplaythrough",this.loadedHandler),null==i.onreadystatechange)i.onreadystatechange=this.loadedHandler;else{var r=i.onreadystatechange;i.onreadystatechange=function(){r(),this.loadedHandler()}}return{tag:i,numChannels:a}},n._handleTagLoad=function(e){e.target.removeEventListener&&e.target.removeEventListener("canplaythrough",this.loadedHandler),e.target.onreadystatechange=null,e.target.src!=e.target.id&&createjs.HTMLAudioPlugin.TagPool.checkSrc(e.target.id)},n._createTag=function(e){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t.src=e,t},n.removeSound=function(e){delete this._audioSources[e],createjs.HTMLAudioPlugin.TagPool.remove(e)},n.removeAllSounds=function(){this._audioSources={},createjs.HTMLAudioPlugin.TagPool.removeAll()},n.create=function(e){if(!this.isPreloadStarted(e)){var t=createjs.HTMLAudioPlugin.TagPool.get(e),n=this._createTag(e);n.id=e,t.add(n),this.preload(e,{tag:n})}return new createjs.HTMLAudioPlugin.SoundInstance(e,this)},n.isPreloadStarted=function(e){return null!=this._audioSources[e]},n.preload=function(e,t){this._audioSources[e]=!0,new createjs.HTMLAudioPlugin.Loader(e,t.tag)},n.toString=function(){return"[HTMLAudioPlugin]"},createjs.HTMLAudioPlugin=e}(),function(){"use strict";function e(e,t){this._init(e,t)}var t=e.prototype=new createjs.EventDispatcher;t.src=null,t.uniqueId=-1,t.playState=null,t._owner=null,t.loaded=!1,t._offset=0,t._delay=0,t._volume=1;try{Object.defineProperty(t,"volume",{get:function(){return this._volume},set:function(e){null!=Number(e)&&(e=Math.max(0,Math.min(1,e)),this._volume=e,this._updateVolume())}})}catch(n){}t.pan=0,t._duration=0,t._remainingLoops=0,t._delayTimeoutId=null,t.tag=null,t._muted=!1,t._paused=!1,t._endedHandler=null,t._readyHandler=null,t._stalledHandler=null,t.loopHandler=null,t._init=function(e,t){this.src=e,this._owner=t,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleSoundReady,this),this._stalledHandler=createjs.proxy(this._handleSoundStalled,this),this.loopHandler=createjs.proxy(this.handleSoundLoop,this)},t._sendEvent=function(e){var t=new createjs.Event(e);this.dispatchEvent(t)},t._cleanUp=function(){var e=this.tag;if(null!=e){e.pause(),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1);try{e.currentTime=0}catch(t){}createjs.HTMLAudioPlugin.TagPool.setInstance(this.src,e),this.tag=null}clearTimeout(this._delayTimeoutId),null!=window.createjs&&createjs.Sound._playFinished(this)},t._interrupt=function(){null!=this.tag&&(this.playState=createjs.Sound.PLAY_INTERRUPTED,this._cleanUp(),this._paused=!1,this._sendEvent("interrupted"))},t.play=function(e,t,n,i,a,s){this._cleanUp(),createjs.Sound._playInstance(this,e,t,n,i,a,s)},t._beginPlaying=function(e,t,n,i){if(null==window.createjs)return-1;var a=this.tag=createjs.HTMLAudioPlugin.TagPool.getInstance(this.src);return null==a?(this.playFailed(),-1):(a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._offset=e,this.volume=n,this.pan=i,this._updateVolume(),this._remainingLoops=t,4!==a.readyState?(a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.preload="auto",a.load()):this._handleSoundReady(null),this._sendEvent("succeeded"),1)},t._handleSoundStalled=function(){this._cleanUp(),this._sendEvent("failed")},t._handleSoundReady=function(){if(null!=window.createjs){if(this._duration=1e3*this.tag.duration,this.playState=createjs.Sound.PLAY_SUCCEEDED,this._paused=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._offset>=this.getDuration())return void this.playFailed();this._offset>0&&(this.tag.currentTime=.001*this._offset),-1==this._remainingLoops&&(this.tag.loop=!0),0!=this._remainingLoops&&(this.tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1),this.tag.loop=!0),this.tag.play()}},t.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||null==this.tag?!1:(this._paused=!0,this.tag.pause(),clearTimeout(this._delayTimeoutId),!0)},t.resume=function(){return this._paused&&null!=this.tag?(this._paused=!1,this.tag.play(),!0):!1},t.stop=function(){return this._offset=0,this.pause(),this.playState=createjs.Sound.PLAY_FINISHED,this._cleanUp(),!0},t.setMasterVolume=function(){return this._updateVolume(),!0},t.setVolume=function(e){return this.volume=e,!0},t._updateVolume=function(){if(null!=this.tag){var e=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;return e!=this.tag.volume&&(this.tag.volume=e),!0}return!1},t.getVolume=function(){return this.volume},t.setMasterMute=function(){return this._updateVolume(),!0},t.setMute=function(e){return null==e||void 0==e?!1:(this._muted=e,this._updateVolume(),!0)},t.getMute=function(){return this._muted},t.setPan=function(){return!1},t.getPan=function(){return 0},t.getPosition=function(){return null==this.tag?this._offset:1e3*this.tag.currentTime},t.setPosition=function(e){if(null==this.tag)this._offset=e;else{this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1);try{this.tag.currentTime=.001*e}catch(t){return!1}this.tag.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1)}return!0},t.getDuration=function(){return this._duration},t._handleSoundComplete=function(){this._offset=0,null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FINISHED,this._cleanUp(),this._sendEvent("complete"))},t.handleSoundLoop=function(){this._offset=0,this._remainingLoops--,0==this._remainingLoops&&(this.tag.loop=!1,this.tag.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this.loopHandler,!1)),this._sendEvent("loop")},t.playFailed=function(){null!=window.createjs&&(this.playState=createjs.Sound.PLAY_FAILED,this._cleanUp(),this._sendEvent("failed"))},t.toString=function(){return"[HTMLAudioPlugin SoundInstance]"},createjs.HTMLAudioPlugin.SoundInstance=e}(),function(){"use strict";function e(e,t){this._init(e,t)}var t=e.prototype;t.src=null,t.tag=null,t.preloadTimer=null,t.loadedHandler=null,t._init=function(e,t){if(this.src=e,this.tag=t,this.preloadTimer=setInterval(createjs.proxy(this.preloadTick,this),200),this.loadedHandler=createjs.proxy(this.sendLoadedEvent,this),this.tag.addEventListener&&this.tag.addEventListener("canplaythrough",this.loadedHandler),null==this.tag.onreadystatechange)this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this);else{var n=this.tag.onreadystatechange;this.tag.onreadystatechange=function(){n(),this.tag.onreadystatechange=createjs.proxy(this.sendLoadedEvent,this)}}this.tag.preload="auto",this.tag.load()},t.preloadTick=function(){var e=this.tag.buffered,t=this.tag.duration;e.length>0&&e.end(0)>=t-1&&this.handleTagLoaded()},t.handleTagLoaded=function(){clearInterval(this.preloadTimer)},t.sendLoadedEvent=function(){this.tag.removeEventListener&&this.tag.removeEventListener("canplaythrough",this.loadedHandler),this.tag.onreadystatechange=null,createjs.Sound._sendFileLoadEvent(this.src)},t.toString=function(){return"[HTMLAudioPlugin Loader]"},createjs.HTMLAudioPlugin.Loader=e}(),function(){"use strict";function e(e){this._init(e)}var t=e;t.tags={},t.get=function(n){var i=t.tags[n];return null==i&&(i=t.tags[n]=new e(n)),i},t.remove=function(e){var n=t.tags[e];return null==n?!1:(n.removeAll(),delete t.tags[e],!0)},t.removeAll=function(){for(var e in t.tags)t.tags[e].removeAll();t.tags={}},t.getInstance=function(e){var n=t.tags[e];return null==n?null:n.get()},t.setInstance=function(e,n){var i=t.tags[e];return null==i?null:i.set(n)},t.checkSrc=function(e){var n=t.tags[e];return null==n?null:void n.checkSrcChange()};var n=e.prototype;n.src=null,n.length=0,n.available=0,n.tags=null,n._init=function(e){this.src=e,this.tags=[]},n.add=function(e){this.tags.push(e),this.length++,this.available++},n.removeAll=function(){for(;this.length--;)delete this.tags[this.length];this.src=null,this.tags.length=0},n.get=function(){if(0==this.tags.length)return null;this.available=this.tags.length;var e=this.tags.pop();return null==e.parentNode&&document.body.appendChild(e),e},n.set=function(e){var t=createjs.indexOf(this.tags,e);-1==t&&this.tags.push(e),this.available=this.tags.length},n.checkSrcChange=function(){for(var e=this.tags.length-1,t=this.tags[e].src;e--;)this.tags[e].src=t},n.toString=function(){return"[HTMLAudioPlugin TagPool]"},createjs.HTMLAudioPlugin.TagPool=e}(),initAudio(),initFaceFromParams(),$(document).ready(function(){function e(){$("#gameIntro").hide(),$("#result").hide(),$("#gameScreen").show(),$("#gameScreen .countdown").addClass("countdown-run"),t(!0,0,i)}function t(e,n,i){n=n||0;var a=500;return n>2500?void("function"==typeof i&&i()):(n%1e3===0&&$("#gameScreen .countdown").html(3-n/1e3),setTimeout(function(){t(!e,n+a,i)},a),void(e?$("#readyBg").show():$("#readyBg").hide()))}function n(){new RC.Slide({elemQuery:"body",slideBegin:s,slideMove:s,slideEnd:function(){try{return d=!1,f}catch(e){alert("end error: "+e.message)}}})}function i(){f=!1,$("#gameScreen .countdown").removeClass("countdown-run").hide(),g.start(n)}function a(){var e=1;return 0!==m&&(v=new Date),timeDelay=v-m,timeDelay>499?e=1:timeDelay>300&&500>timeDelay?e=2:timeDelay>100&&301>timeDelay?e=3:101>timeDelay&&(e=4),m=new Date,e}function s(e){var t=document.elementFromPoint(e.pageX,e.pageY);if("userBody"===$(t).attr("id")||$(t).parents("#userBody").length>0){if(d===!1){var n=e.pageX<$(window).width()/2?"left":"right";d=!0,h++,Game.View.setScore(h),Game.Animate.twitch(a(),RC.UTILS.UrlParam.sex,1,n),l(RC.UTILS.UrlParam.sex,n)}}else d=!1}function r(e){createjs.Sound.play(e+Math.round(Math.random()))}function o(e){_===!1&&(_=!0,$(".bianzi").show(),u(e,0,3,function(){$(".bianzi").hide(),_=!1}))}function u(e,t,n,i){if("number"!=typeof t&&(console.log("reset"),t=0),t>=n)return void i();$(".bianzi img").attr("src","assets/images/bianzi/"+e+t+".png");setTimeout(function(){u(e,t+1,n,i)},100)}function l(e,t){var n=Math.floor(3*Math.random());$("#gameScreen .pa"+n).css(c(t)).show(),setTimeout(function(){$("#gameScreen .pa"+n).hide()},200),o(t),r(e)}function c(e){var t=y[e],n=Math.random()*(t.max.x-t.min.x)+t.min.x,i=Math.random()*(t.max.y-t.min.y)+t.min.y;return{left:n,top:i}}resizeContainer();var d=!1,h=0,f=!0,g=new Game,p=new Game.Time({add:1,minus:5,sum:gameTime,countFunc:Game.View.setTimer,end:function(){$.ajax({url:"/chouren/"+RC.UTILS.UrlParam.uid+"/"+h,type:"get",success:function(e){"string"==typeof e&&(e=JSON.parse(e)),$("#result .info .title .paiming").html(e.ren_num)},error:function(){var e=$("#gameIntro .info span").eq(0).html();$("#result .info .title .paiming").html(parseInt(e)+1)}}),$("#gameScreen").hide(),$("#result .info .title .hit-count").html(h),$("#result").show(),f=!0}});g.setTimer(p),$("#play img").bind("touchstart",function(){e()}),$("#replay img").bind("touchstart",function(){$("#gameIntro").hide(),$("#result").hide(),$("#gameScreen").show(),$("#score").html("0<span>次</span>"),$("#timer").html(gameTime+"<span>秒</span>"),$("#gameScreen .countdown").addClass("countdown-run").show(),h=0,t(!0,0,function(){$("#gameScreen .countdown").removeClass("countdown-run").hide(),g.replay(),f=!1;new RC.Slide({elemQuery:"body",slideBegin:s,slideMove:s,slideEnd:function(){try{return d=!1,f}catch(e){alert("end error: "+e.message)}}})})});var m=0,v=0,_=!1,y={left:{max:{x:120,y:700},min:{x:0,y:300}},right:{max:{x:500,y:700},min:{x:360,y:300}}}}),WeixinApi.ready(function(e){var t={imgUrl:"http://182.92.186.42/personal/slide/images/tfz.jpg",link:window.location.href,desc:"大家好，我是rechie，测试微信分享功能",title:"大家好，我是rechie"},n={ready:function(){},cancel:function(){},fail:function(){},confirm:function(){},all:function(){}};e.shareToFriend(t,n),e.shareToTimeline(t,n),e.shareToWeibo(t,n)});