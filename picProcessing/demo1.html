<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AlloyPhoto Demo1</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="page.css">
    <script type="text/javascript" src="assets/js/alloyimage.js"></script>
    <script type="text/javascript" src="assets/js/main.js"></script>
</head>
<body>
<div class="wrap">
    <img src="assets/images/TYlian0.png" class="lian zIndex2" id="lian" />
    <img src="assets/images/TYtoufahou1501.png" class="toufahou zIndex1" id="toufahou" />
    <img src="assets/images/TYtoufaqian1.png" class="toufaqian zIndex4" id="toufaqian" />
    <img src="assets/images/TYbizi1.png" class="bizi zIndex3" />
    <img src="assets/images/TYmaozi1.png" class="maozi zIndex5" />
    <img src="assets/images/TYmeimao0.png" class="meimao zIndex3" />
    <img src="assets/images/TYtezheng1.png" class="tezheng zIndex3" />
    <img src="assets/images/TYyanjing0.png" class="yanjing zIndex3" />
    <img src="assets/images/TYzui0.png" class="zui zIndex3">
</div>
<canvas id="imageScreen"></canvas>
<script type="text/javascript">
    var pics = document.getElementsByTagName("img");
    var pics = [
        {
            elem: document.getElementById('lian'),
            color: -99
        },
        {
            elem: document.getElementById('toufahou'),
            color: -99
        },
        {
            elem: document.getElementById('toufaqian'),
            color: -99
        },
    ]

    for(var i = 0;i < pics.length;i ++){
        pics[i].elem.loadOnce(function(){
            /*
             防止用onload事件注册后  replace会改变img的src导致onload事件再次触发形成循环
             */

            var picTranseObj = psLib(this);//创建一个psLib对象
            var origin = picTranseObj.clone();//克隆原始对象做为原始副本

            var grayPic = picTranseObj.act("添加杂色");
            grayPic.replace(this);

//            this.onmouseover = function(){
//                origin.replace(this);
//            };
//
//            this.onmouseout = function(){
//                grayPic.replace(this);
//            };

        });
    }
</script>
</body>
</html>
